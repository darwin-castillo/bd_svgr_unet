CREATE TABLE EDIFICIO(
ID INTEGER NOT NULL,
DESCRIPCION VARCHAR(15),
PRIMARY KEY(ID)
);

CREATE TABLE SDS_TIPO_MATERIALES_TML (
  TML_CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  TML_NOMBRE CHAR(15) NULL,
  TML_DESC CHAR(15) NULL,
  PRIMARY KEY(TML_CODIGO)
);

CREATE TABLE INFORMACION_ADMINISTRATIVA_INFA (
  ID_CENTRO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  PERN_TIPN_CODIGO INTEGER UNSIGNED NOT NULL,
  CEDULA INTEGER UNSIGNED NULL,
  NACIONALIDAD VARCHAR(15) NULL,
  PRIMARY KEY(ID_CENTRO, ANO_FISCAL)
);

CREATE TABLE SDS_PISOS_PSO (
  PSO_COD INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  PSO_NOMBRE CHAR(15) NULL,
  PRIMARY KEY(PSO_COD)
);

CREATE TABLE SDS_ESTATUS_ETU (
  COD INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  NOMBRE CHAR(15) NULL,
  DESCRIPCION CHAR(15) NULL,
  PRIMARY KEY(COD)
);

CREATE TABLE SDS_ORDEN_PRIORIDAD_OPA (
  OPA_CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  OPA_NOMBRE CHAR(15) NULL,
  PRIMARY KEY(OPA_CODIGO)
);

CREATE TABLE SIF_CENTRO_COSTO_CTR (
  CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  CTR_DESCRIPCION VARCHAR(15) NULL,
  CTR_SUB_CODIGO INTEGER UNSIGNED NULL,
  CTR_SUB_UBICACION VARCHAR(15) NULL,
  CTR_TELEFONO1 VARCHAR(12) NULL,
  CTR_TELEFONO2 VARCHAR(12) NOT NULL,
  CTR_CORREO_ELECT VARCHAR(50) NULL,
  CTR_CREADO_POR VARCHAR(30) NULL,
  CTR_MODIFICADO_POR VARCHAR(30) NULL,
  CTR_FECHA_UPDATE DATE NULL,
  PRIMARY KEY(CTR_ID_CENTRO, CTR_AÑO_FISCAL)
);

CREATE TABLE ADMINIS (
  CEDULA INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  NACIONALIDAD CHAR NULL,
  PRIMARY KEY(CEDULA)
);

CREATE TABLE edificio (
  edo_codigo INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  edo_nombre VARCHAR(45) NULL,
  PRIMARY KEY(edo_codigo)
);

CREATE TABLE SDS_TIPO_SERVICIO_TSO (
  TSO_CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO INTEGER UNSIGNED NOT NULL,
  TSO_NOMBRE CHAR(15) NOT NULL,
  TSO_DESCRIPCION CHAR(15) NOT NULL,
  PRIMARY KEY(TSO_CODIGO, SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  INDEX SDS_TIPO_SERVICIO_TSO_FKIndex1(SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  FOREIGN KEY(SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
    REFERENCES SDS_ORDEN_PRIORIDAD_OPA(OPA_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE SERVICIOS_SVO (
  SVO_CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  SDS_TIPO_SERVICIO_TSO_TSO_CODIGO INTEGER UNSIGNED NOT NULL,
  SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO INTEGER UNSIGNED NOT NULL,
  SVO_NOMBRE CHAR(15) NULL,
  SVO_DESCRIPCION CHAR(15) NULL,
  PRIMARY KEY(SVO_CODIGO, SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  INDEX SERVICIOS_SVO_FKIndex1(SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  FOREIGN KEY(SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
    REFERENCES SDS_TIPO_SERVICIO_TSO(TSO_CODIGO, SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE MATERIALES_MTL (
  MTL_COD INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  SDS_TIPO_MATERIALES_TML_TML_CODIGO INTEGER UNSIGNED NOT NULL,
  MTL_NOMBRE CHAR(15) NULL,
  MTL_CANTIDAD INTEGER UNSIGNED NULL,
  PRIMARY KEY(MTL_COD, SDS_TIPO_MATERIALES_TML_TML_CODIGO),
  INDEX MATERIALES_MTL_FKIndex1(SDS_TIPO_MATERIALES_TML_TML_CODIGO),
  FOREIGN KEY(SDS_TIPO_MATERIALES_TML_TML_CODIGO)
    REFERENCES SDS_TIPO_MATERIALES_TML(TML_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE ASIGNACION_TAREA_ATA (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SVO_CODIGO INTEGER UNSIGNED NOT NULL,
  MATERIALES_MTL_MTL_COD INTEGER UNSIGNED NOT NULL,
  MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO INTEGER UNSIGNED NOT NULL,
  ATA_CANTIDAD INTEGER UNSIGNED NULL,
  PRIMARY KEY(ID, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SVO_CODIGO, MATERIALES_MTL_MTL_COD, MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  INDEX ASIGNACION_TAREA_ATA_FKIndex1(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  INDEX ASIGNACION_TAREA_ATA_FKIndex2(MATERIALES_MTL_MTL_COD, MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO),
  FOREIGN KEY(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
    REFERENCES SERVICIOS_SVO(SVO_CODIGO, SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MATERIALES_MTL_MTL_COD, MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO)
    REFERENCES MATERIALES_MTL(MTL_COD, SDS_TIPO_MATERIALES_TML_TML_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE JEF (
  JEF_CARGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  CEDULA INTEGER UNSIGNED NOT NULL,
  INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  JEF_FECHA_FIN DATE NULL,
  JEF_FECHA_INI DATE NULL,
  TIPO INTEGER UNSIGNED NULL,
  NACIONALIDAD CHAR NULL,
  PRIMARY KEY(JEF_CARGO, SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, CEDULA, INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO),
  INDEX JEFE_JEF_FKIndex1(SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL),
  INDEX JEFE_JEF_FKIndex2(INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL),
  FOREIGN KEY(SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL)
    REFERENCES SIF_CENTRO_COSTO_CTR(CTR_ID_CENTRO, CTR_AÑO_FISCAL)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL)
    REFERENCES INFORMACION_ADMINISTRATIVA_INFA(ID_CENTRO, ANO_FISCAL)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE SDS_LOCALIDADES_LCD (
  LCD_COD INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SDS_PISOS_PSO_PSO_COD INTEGER UNSIGNED NOT NULL,
  edificio_edo_codigo INTEGER UNSIGNED NOT NULL,
  LCD_NOMBRE CHAR(15) NULL,
  PRIMARY KEY(LCD_COD, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_PISOS_PSO_PSO_COD),
  INDEX SDS_LOCALIDADES_LCD_FKIndex1(SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL),
  INDEX SDS_LOCALIDADES_LCD_FKIndex2(SDS_PISOS_PSO_PSO_COD),
  INDEX SDS_LOCALIDADES_LCD_FKIndex3(edificio_edo_codigo),
  FOREIGN KEY(SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL)
    REFERENCES SIF_CENTRO_COSTO_CTR(CTR_ID_CENTRO, CTR_AÑO_FISCAL)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SDS_PISOS_PSO_PSO_COD)
    REFERENCES SDS_PISOS_PSO(PSO_COD)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(edificio_edo_codigo)
    REFERENCES edificio(edo_codigo)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE SDS_FORMATOS_FMO (
  FMO_COD INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  JEF_CEDULA INTEGER UNSIGNED NOT NULL,
  JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  JEF_JEF_CARGO INTEGER UNSIGNED NOT NULL,
  FMO_FECHA DATE NULL,
  PRIMARY KEY(FMO_COD, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_CEDULA, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_JEF_CARGO),
  INDEX SDS_FORMATOS_FMO_FKIndex1(JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_JEF_CARGO, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, JEF_CEDULA),
  FOREIGN KEY(JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_JEF_CARGO, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, JEF_CEDULA)
    REFERENCES JEF(SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_CARGO, INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, CEDULA)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE PERSONAS (
  CEDULA INTEGER UNSIGNED NOT NULL,
  JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  JEF_CEDULA INTEGER UNSIGNED NOT NULL,
  JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  JEF_CARGO INTEGER UNSIGNED NOT NULL,
  NACIONALIDAD CHAR NULL,
  NOMBRE CHAR(15) NULL AUTO_INCREMENT,
  APELLIDO CHAR(15) NULL,
  PRIMARY KEY(CEDULA),
  INDEX PERSONAS_FKIndex1(JEF_CARGO, JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_CEDULA, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO),
  FOREIGN KEY(JEF_CARGO, JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_CEDULA, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO)
    REFERENCES JEF(JEF_CARGO, SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, CEDULA, INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE ASIGNACION_MATERIAL_AML (
  AML_ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  MATERIALES_MTL_MTL_COD INTEGER UNSIGNED NOT NULL,
  MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_FMO_COD INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_JEF_CARGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_CEDULA INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  AML_CANT_ESTIMADA INTEGER UNSIGNED NULL,
  AML_CANT_USADA INTEGER UNSIGNED NULL,
  PRIMARY KEY(AML_ID, MATERIALES_MTL_MTL_COD, MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO, SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_JEF_CARGO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO),
  INDEX ASIGNACION_MATERIAL_AML_FKIndex2(MATERIALES_MTL_MTL_COD, MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO),
  INDEX ASIGNACION_MATERIAL_AML_FKIndex2(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO),
  FOREIGN KEY(MATERIALES_MTL_MTL_COD, MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO)
    REFERENCES MATERIALES_MTL(MTL_COD, SDS_TIPO_MATERIALES_TML_TML_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO)
    REFERENCES SDS_FORMATOS_FMO(FMO_COD, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_CEDULA, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_JEF_CARGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE ASIG_PERSONAL_APL (
  APL_PERSONAL_SUGERIDO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SVO_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_FMO_COD INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_JEF_CARGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_CEDULA INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  APL_PERSONAL_USADO INTEGER UNSIGNED NULL,
  PRIMARY KEY(APL_PERSONAL_SUGERIDO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO, SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_JEF_CARGO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO),
  INDEX ASIG_PERSONAL_APL_FKIndex2(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  INDEX ASIG_PERSONAL_APL_FKIndex2(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO),
  INDEX ASIG_PERSONAL_APL_FKIndex3(INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL),
  FOREIGN KEY(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
    REFERENCES SERVICIOS_SVO(SVO_CODIGO, SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO)
    REFERENCES SDS_FORMATOS_FMO(FMO_COD, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_CEDULA, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_JEF_CARGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL)
    REFERENCES INFORMACION_ADMINISTRATIVA_INFA(ID_CENTRO, ANO_FISCAL)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE ITEM_HISTORICO_HIS (
  SDS_ESTATUS_ETU_COD INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SVO_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_FMO_COD INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_JEF_CARGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_CEDULA INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  HIS_FECHA_INICIO DATE NOT NULL AUTO_INCREMENT,
  HIS_OBSERVACION CHAR(15) NULL,
  HIS_FECHA_FIN DATE NULL,
  PRIMARY KEY(SDS_ESTATUS_ETU_COD, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO, SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_JEF_CARGO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO),
  INDEX ITEM_HISTORICO_HIS_FKIndex1(SDS_ESTATUS_ETU_COD),
  INDEX ITEM_HISTORICO_HIS_FKIndex2(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  INDEX ITEM_HISTORICO_HIS_FKIndex3(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO),
  FOREIGN KEY(SDS_ESTATUS_ETU_COD)
    REFERENCES SDS_ESTATUS_ETU(COD)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
    REFERENCES SERVICIOS_SVO(SVO_CODIGO, SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO)
    REFERENCES SDS_FORMATOS_FMO(FMO_COD, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_CEDULA, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_JEF_CARGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE ITEMS_ITM (
  ITM_ID INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_MATERIALES_MTL_MTL_COD INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_AML_ID INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO INTEGER UNSIGNED NOT NULL,
  SERVICIOS_SVO_SVO_CODIGO INTEGER UNSIGNED NOT NULL,
  SDS_LOCALIDADES_LCD_SDS_PISOS_PSO_PSO_COD INTEGER UNSIGNED NOT NULL,
  SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_LOCALIDADES_LCD_LCD_COD INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_FMO_COD INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_CEDULA INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_JEF_CARGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_JEF_CARGO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_CEDULA INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO INTEGER UNSIGNED NOT NULL,
  SDS_FORMATOS_FMO_FMO_COD INTEGER UNSIGNED NOT NULL,
  ITM_OBSERVACION CHAR(15) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY(ITM_ID, ASIGNACION_MATERIAL_AML_MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO, ASIGNACION_MATERIAL_AML_MATERIALES_MTL_MTL_COD, ASIGNACION_MATERIAL_AML_AML_ID, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SVO_CODIGO, SDS_LOCALIDADES_LCD_SDS_PISOS_PSO_PSO_COD, SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_LOCALIDADES_LCD_LCD_COD, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_FMO_COD, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_CEDULA, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_JEF_CARGO),
  INDEX ITEMS_ITM_FKIndex1(ASIGNACION_MATERIAL_AML_AML_ID, ASIGNACION_MATERIAL_AML_MATERIALES_MTL_MTL_COD, ASIGNACION_MATERIAL_AML_MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_FMO_COD, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_JEF_CARGO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_CEDULA, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO),
  INDEX ITEMS_ITM_FKIndex2(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO),
  INDEX ITEMS_ITM_FKIndex3(SDS_LOCALIDADES_LCD_LCD_COD, SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_LOCALIDADES_LCD_SDS_PISOS_PSO_PSO_COD),
  INDEX ITEMS_ITM_FKIndex4(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO),
  FOREIGN KEY(ASIGNACION_MATERIAL_AML_AML_ID, ASIGNACION_MATERIAL_AML_MATERIALES_MTL_MTL_COD, ASIGNACION_MATERIAL_AML_MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_FMO_COD, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_JEF_CARGO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_CEDULA, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, ASIGNACION_MATERIAL_AML_SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO)
    REFERENCES ASIGNACION_MATERIAL_AML(AML_ID, MATERIALES_MTL_MTL_COD, MATERIALES_MTL_SDS_TIPO_MATERIALES_TML_TML_CODIGO, SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_JEF_CARGO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SERVICIOS_SVO_SVO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SERVICIOS_SVO_SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
    REFERENCES SERVICIOS_SVO(SVO_CODIGO, SDS_TIPO_SERVICIO_TSO_TSO_CODIGO, SDS_TIPO_SERVICIO_TSO_SDS_ORDEN_PRIORIDAD_OPA_OPA_CODIGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SDS_LOCALIDADES_LCD_LCD_COD, SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_LOCALIDADES_LCD_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_LOCALIDADES_LCD_SDS_PISOS_PSO_PSO_COD)
    REFERENCES SDS_LOCALIDADES_LCD(LCD_COD, SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_PISOS_PSO_PSO_COD)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SDS_FORMATOS_FMO_FMO_COD, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, SDS_FORMATOS_FMO_JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, SDS_FORMATOS_FMO_JEF_CEDULA, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, SDS_FORMATOS_FMO_JEF_JEF_CARGO)
    REFERENCES SDS_FORMATOS_FMO(FMO_COD, JEF_INFORMACION_ADMINISTRATIVA_INFA_ID_CENTRO, JEF_INFORMACION_ADMINISTRATIVA_INFA_ANO_FISCAL, JEF_CEDULA, JEF_SIF_CENTRO_COSTO_CTR_CTR_AÑO_FISCAL, JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO, JEF_JEF_CARGO)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

SELECT 
   SUM(HIS.HIS_FECHA_FIN - HIS.HIS_FECHA_INICIO)/COUNT(HIS.HIS_FECHA_FIN - HIS.HIS_FECHA_INICIO) 
FROM 
  ITEM_HISTORICO_HIS AS HIS INNER JOIN SDS_ESTATUS_ETU AS ETU ON HIS.SDS_ESTATUS_ETU_COD = ETU.COD
  SDS_FORMATOS_FMO AS FMO INNER JOIN  JEFE_JEF  AS JEF 
  ON 
  FMO.JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO = JEF.SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO
  SIF_CENTRO_COSTO_CTR AS CTR INNER JOIN JEFE_JEF AS JEF 
  ON 
  JEF.SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO = CTR.CTR_ID_CENTRO
WHERE
  HIS.SDS_FORMATOS_FMO_JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRP = FMO.JEF_SIF_CENTRO_COSTO_CTR_CTR_ID_CENTRO
GROUP BY HIS.FMO_CODIGO

 
